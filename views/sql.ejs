<!DOCTYPE html>
<html>
<head>
<title>SUPERCRUDGEN</title>
<link href="https://fonts.googleapis.com/css?family=Rajdhani" rel="stylesheet">
<style>
::-ms-selection{color:#FFF;  background-color:#A1D389;}
::-moz-selection{color:#FFF;  background-color:#A1D389;}
::-webkit-selection{color:#FFF;	background-color:#A1D389;}
::selection{color:#FFF; background-color:#A1D389;}



::-webkit-scrollbar { background:#fff; width: 7px; height: 7px;}
::-webkit-scrollbar-thumb {-webkit-border-radius: 10px; background-color:#666;}
::scrollbar { background:#fff; width: 7px; height: 7px;}
::scrollbar-thumb {-webkit-border-radius: 10px; background-color:#666; border-radius: 10px;}:
:-moz-scrollbar { background:#fff; width: 7px; height: 7px;}
::-moz-scrollbar-thumb {-webkit-border-radius: 10px; background-color:#666; border-radius: 10px;}



body{direction:ltr; font-family: 'Rajdhani';margin:10px;}



a{font-size:18px;font-family:;color:#2E6912;transition-duration:1s;transition-property:all;-webkit-transition-duration:1s;-webkit-transition-property:all;text-decoration:none;}
a:hover{color:#A1D389;text-decoration:none;}


input {
  padding: 16px 20px;
  margin:5px;
  width:20%;
  border:none;
  border-radius: 4px;
  background-color: #f1f1f1;
  transition:0.5s;
}
input:focus{
	  outline:none;
	  background-color:#ccc;
}
select {
  padding: 16px 20px;
  margin:5px;
  border: none;
  border-radius: 4px;
  background-color: #f1f1f1;
  cursor:pointer;
  transition:0.5s;
}
select:focus{
	  outline:none;
	  background-color:#ccc;
}
.button{
cursor:pointer;
background-color: #2E6912;
border: none;
color: white;
padding: 16px 32px;
border-radius:4px;
font-size:20px;
margin:5px;
transition:1s;
}
.button:focus{
outline:none;
}
.button:hover{
background-color:#2E6655;
}
.updateButton{
background-color:#2E6912;
}
.updateButton:hover{
background-color:#2E6655;
}
.deleteButton{background-color:#F00;}
.updateDiv{display:none;width:100%:height:100%;z-index:10;}





</style>
</head>
<body>
<div style="text-align:Center;cursor:pointer;">
<h1 style="color:#2E6912;display:inline-block;">CRUD  </h1><h1 style="color:#f00;display:inline-block;">GENERATOR</h1>
<a href="https://www.github.com/decryptor007" target="_blank"><h5>@decryptor007</h5></a>
</div>
<form style="text-align:center;">
	<input id="projectName" type="text" placeholder="projectName" style="display:inline-block;"/>
	<br>
	<input id="path" type="text" placeholder="Path" style="display:inline-block;"/>
	<input id="dbName" type="text" placeholder="Database Name" style="display:inline-block;"/>
	<input id="dbPassword" type="text" placeholder="Database Password" style="display:inline-block;"/>
	<br>
	<input id="dbUser" type="text" placeholder="Database User" style="display:inline-block;"/>
	<input id="dbHost" type="text" placeholder="Database Host" style="display:inline-block;"/>
	<input id="port" type="text" placeholder="Port" style="display:inline-block;"/>
	<br>
	<div id="tables">
	</div>
	<button onClick="return addTable();" class="button">Add Table</button>
	<button onClick="return add();" class="button" style="background:#F00;">CREATE</button>
</form>


<!--table template-->
<div id="tableTemplate" style="display:none;">
	<input id="tableName_0" type="text" maxlength="64" placeholder="Table name"/>
	<br>
	<div id="columns_0">
	</div>
	<button onClick="return addColumn(event);" id="tableName_0" class="button">Add Column</button>
</div>


<!--column template-->
<div style="display:none;" id="columntemplate">
<tr class="odd">
<td class="center">
    <!-- column name -->
    <input id="field_0_1" maxlength="64" class="textfield" title="Column" size="10" value="" placeholder="Column Name">

</td>
<td class="center">
    <!-- column type -->
    <select id="field_0_2">
    <option title="A 4-byte integer, signed range is -2,147,483,648 to 2,147,483,647, unsigned range is 0 to 4,294,967,295">INT</option><option title="A variable-length (0-65,535) string, the effective maximum length is subject to the maximum row size">VARCHAR</option><option title="A TEXT column with a maximum length of 65,535 (2^16 - 1) characters, stored with a two-byte prefix indicating the length of the value in bytes">TEXT</option><option title="A date, supported range is 1000-01-01 to 9999-12-31">DATE</option><optgroup label="Numeric"><option title="A 1-byte integer, signed range is -128 to 127, unsigned range is 0 to 255">TINYINT</option><option title="A 2-byte integer, signed range is -32,768 to 32,767, unsigned range is 0 to 65,535">SMALLINT</option><option title="A 3-byte integer, signed range is -8,388,608 to 8,388,607, unsigned range is 0 to 16,777,215">MEDIUMINT</option><option title="A 4-byte integer, signed range is -2,147,483,648 to 2,147,483,647, unsigned range is 0 to 4,294,967,295">INT</option><option title="An 8-byte integer, signed range is -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807, unsigned range is 0 to 18,446,744,073,709,551,615">BIGINT</option><option disabled="disabled">-</option><option title="A fixed-point number (M, D) - the maximum number of digits (M) is 65 (default 10), the maximum number of decimals (D) is 30 (default 0)">DECIMAL</option><option title="A small floating-point number, allowable values are -3.402823466E+38 to -1.175494351E-38, 0, and 1.175494351E-38 to 3.402823466E+38">FLOAT</option><option title="A double-precision floating-point number, allowable values are -1.7976931348623157E+308 to -2.2250738585072014E-308, 0, and 2.2250738585072014E-308 to 1.7976931348623157E+308">DOUBLE</option><option title="Synonym for DOUBLE (exception: in REAL_AS_FLOAT SQL mode it is a synonym for FLOAT)">REAL</option><option disabled="disabled">-</option><option title="A bit-field type (M), storing M of bits per value (default is 1, maximum is 64)">BIT</option><option title="A synonym for TINYINT(1), a value of zero is considered false, nonzero values are considered true">BOOLEAN</option><option title="An alias for BIGINT UNSIGNED NOT NULL AUTO_INCREMENT UNIQUE">SERIAL</option></optgroup><optgroup label="Date and time"><option title="A date, supported range is 1000-01-01 to 9999-12-31">DATE</option><option title="A date and time combination, supported range is 1000-01-01 00:00:00 to 9999-12-31 23:59:59">DATETIME</option><option title="A timestamp, range is 1970-01-01 00:00:01 UTC to 2038-01-09 03:14:07 UTC, stored as the number of seconds since the epoch (1970-01-01 00:00:00 UTC)">TIMESTAMP</option><option title="A time, range is -838:59:59 to 838:59:59">TIME</option><option title="A year in four-digit (4, default) or two-digit (2) format, the allowable values are 70 (1970) to 69 (2069) or 1901 to 2155 and 0000">YEAR</option></optgroup><optgroup label="String"><option title="A fixed-length (0-255, default 1) string that is always right-padded with spaces to the specified length when stored">CHAR</option><option title="A variable-length (0-65,535) string, the effective maximum length is subject to the maximum row size">VARCHAR</option><option disabled="disabled">-</option><option title="A TEXT column with a maximum length of 255 (2^8 - 1) characters, stored with a one-byte prefix indicating the length of the value in bytes">TINYTEXT</option><option title="A TEXT column with a maximum length of 65,535 (2^16 - 1) characters, stored with a two-byte prefix indicating the length of the value in bytes">TEXT</option><option title="A TEXT column with a maximum length of 16,777,215 (2^24 - 1) characters, stored with a three-byte prefix indicating the length of the value in bytes">MEDIUMTEXT</option><option title="A TEXT column with a maximum length of 4,294,967,295 or 4GiB (2^32 - 1) characters, stored with a four-byte prefix indicating the length of the value in bytes">LONGTEXT</option><option disabled="disabled">-</option><option title="Similar to the CHAR type, but stores binary byte strings rather than non-binary character strings">BINARY</option><option title="Similar to the VARCHAR type, but stores binary byte strings rather than non-binary character strings">VARBINARY</option><option disabled="disabled">-</option><option title="A BLOB column with a maximum length of 255 (2^8 - 1) bytes, stored with a one-byte prefix indicating the length of the value">TINYBLOB</option><option title="A BLOB column with a maximum length of 16,777,215 (2^24 - 1) bytes, stored with a three-byte prefix indicating the length of the value">MEDIUMBLOB</option><option title="A BLOB column with a maximum length of 65,535 (2^16 - 1) bytes, stored with a two-byte prefix indicating the length of the value">BLOB</option><option title="A BLOB column with a maximum length of 4,294,967,295 or 4GiB (2^32 - 1) bytes, stored with a four-byte prefix indicating the length of the value">LONGBLOB</option><option disabled="disabled">-</option><option title="An enumeration, chosen from the list of up to 65,535 values or the special '' error value">ENUM</option><option title="A single value chosen from a set of up to 64 members">SET</option></optgroup><optgroup label="Spatial"><option title="A type that can store a geometry of any type">GEOMETRY</option><option title="A point in 2-dimensional space">POINT</option><option title="A curve with linear interpolation between points">LINESTRING</option><option title="A polygon">POLYGON</option><option title="A collection of points">MULTIPOINT</option><option title="A collection of curves with linear interpolation between points">MULTILINESTRING</option><option title="A collection of polygons">MULTIPOLYGON</option><option title="A collection of geometry objects of any type">GEOMETRYCOLLECTION</option></optgroup><optgroup label="JSON"><option title="Stores and enables efficient access to data in JSON (JavaScript Object Notation) documents">JSON</option></optgroup></select></td>

<td class="center">
    <!-- column length -->
    <input id="field_0_3" type="text" size="8" value="" placeholder="length(100)">
</td>



<td class="center">
    <!-- column default -->
    <input id="field_0_4" type="text" placeholder="default">
</td>


<td class="center">
    <!-- column NULL -->
    <select id="field_0_5" data-index="">
	    <option value="NULL" title="Primary">
	    	 NULL
	    </option>
	    <option value="NOT NULL">NOT NULL</option>
    </select>

</td>



    <!-- column indexes, See my other comment about  this 'if'. -->
    <td class="center">
    <select id="field_0_6" data-index="">
    <option value="NONE">NONE</option>
    <option value="PRIMARY KEY" title="Primary">
        PRIMARY
    </option>
    <option value="UNIQUE" title="Unique">
        UNIQUE
    </option>
    </select>
</td>

<td class="center">
    <!-- column auto_increment -->
    <select id="field_0_7" data-index="">
    <option value="NORMAL" title="Primary">
    	 NORMAL
    </option>
    <option value="AUTO_INCREMENT">AUTO_INCREMENT</option>
</select>
</td>
        </tr>


</div>



<script>
//ajax shortcut
function ajaxRequest(path,requestType,contentType,request,callback){
	var xhr = new XMLHttpRequest();
	xhr.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			callback(this.responseText);
			};
	}
	xhr.open(requestType,path, true);
	xhr.setRequestHeader("Content-type",contentType);
	if(contentType=="application/json"){xhr.send(JSON.stringify(request));}
	else{xhr.send(request);}
	}


</script>
<script>
var count=[];
var tableCount=1;


function add(){
	var path=document.getElementById("path").value;
	var port=document.getElementById("port").value;
	var projectName=document.getElementById("projectName").value;
	var dbName=document.getElementById("dbName").value;
	var dbUser=document.getElementById("dbUser").value;
	var dbPassword=document.getElementById("dbPassword").value;
	var dbHost=document.getElementById("dbHost").value;
	var obj={"tables":[],
		 "projectName":projectName,
 		 "path":path,
		 "port":port,
		 "dbName":dbName,
		 "dbUser":dbUser,
		 "dbPassword":dbPassword,
		 "dbHost":dbHost};
	for(var k=1;k<tableCount;k++){
		var tableName=document.getElementById("tableName_"+k).value;
		var jsonObject={"columns":[],"tableName":tableName};
		var tempArr=[];
		for(var i=1;i<count[k];i++){
			for(var j=1;j<8;j++){
				if(j==4){tempArr.push("");//default field skip for now
				}
				else{
				tempArr.push(document.getElementById("field_"+i+"_"+k+"_"+j).value);
				}
			}
			jsonObject.columns.push(tempArr);
			tempArr=[];
		}
		obj.tables.push(jsonObject);
	}
	ajaxRequest("/createtable","POST","application/json",obj,function(res){
		if(res=="true"){alert("Done");}
		else{alert("Something went wrong check the terminal!");}
	});
	return false;
}



function addColumn(e){
	var tableID=e.target.id.slice(10,e.target.id.length);
	var div=document.getElementById("columns_"+tableID);
	var columnTemplate=document.getElementById("columntemplate");
	columnTemplate=columnTemplate.cloneNode(true);
	columnTemplate.style.display="block";
	columnTemplate.id="column_"+count[tableID]+'_'+tableID;
	columnTemplate.childNodes[3].id='field_'+count[tableID]+'_'+tableID+'_1';
	columnTemplate.childNodes[7].id='field_'+count[tableID]+'_'+tableID+'_2';
	columnTemplate.childNodes[11].id='field_'+count[tableID]+'_'+tableID+'_3';
	columnTemplate.childNodes[15].id='field_'+count[tableID]+'_'+tableID+'_4';
	columnTemplate.childNodes[19].id='field_'+count[tableID]+'_'+tableID+'_5';
	columnTemplate.childNodes[23].id='field_'+count[tableID]+'_'+tableID+'_6';
	columnTemplate.childNodes[27].id='field_'+count[tableID]+'_'+tableID+'_7';
	div.appendChild(columnTemplate);
	/**
	var temp=columnTemplate.innerHTML;
	temp=temp.replace(/field_0_/g,'field_'+count[tableID]+'_'+tableID+'_');
	div.innerHTML=div.innerHTML+"<br>"+temp;
	**/
	count[tableID]+=1;
	return false;}


function addTable(){
		var div=document.getElementById("tables");
		var tableTemplate=document.getElementById("tableTemplate");
		tableTemplate=tableTemplate.cloneNode(true);
		tableTemplate.id="table_"+tableCount;
		tableTemplate.style.display="block";
		console.log(tableTemplate.childNodes);
		tableTemplate.childNodes[1].id="tableName_"+tableCount;
		tableTemplate.childNodes[5].id="columns_"+tableCount;
		tableTemplate.childNodes[7].id="tableName_"+tableCount;
		div.appendChild(tableTemplate);
		//console.log(tableTemplate.childNodes);
		count[tableCount]=1;
		tableCount+=1;
		return false;
	}
</script>
</body>
</html>
